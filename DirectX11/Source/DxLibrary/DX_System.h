#ifndef __DX_SYSTEM_H_
#define __DX_SYSTEM_H_
	
//****************************************************************************************************
//
//	System
//
//****************************************************************************************************
class DX_System
{
public:
	//------------------------------------------------------------------------------
	//
	//  @brief		解放
	//
	//------------------------------------------------------------------------------
	~DX_System();

	//------------------------------------------------------------------------------
	//
	//  @brief		DX_Systemのインスタンスを取得する
	//
	//------------------------------------------------------------------------------
	static DX_System* GetInstance();

	//------------------------------------------------------------------------------
	//
	//  @brief		Deviceなどを解放する
	//
	//------------------------------------------------------------------------------
	static void Release();

	//------------------------------------------------------------------------------
	//
	//  @brief		DirectXを初期化する
	//	@param[in]	hwnd	DX_Framework::GetHwnd()
	//
	//------------------------------------------------------------------------------
	bool InitD3D(const HWND& hWnd);

	//------------------------------------------------------------------------------
	//
	//  @brief		ウィンドウのサイズを設定
	//	@param[in]	width ウィンドウ幅
	//	@param[in]	height ウィンドウ高さ
	//
	//------------------------------------------------------------------------------
	void SetWindowsSize(const unsigned int width, const unsigned int height);

	//------------------------------------------------------------------------------
	//
	//  @brief		ウィンドウの高さを取得
	//	@return		m_windowHeight
	//
	//------------------------------------------------------------------------------
	static unsigned int GetWindowHeight();

	//------------------------------------------------------------------------------
	//
	//  @brief		ウィンドウの幅を取得
	//	@return		m_windowWidth
	//
	//------------------------------------------------------------------------------
	static unsigned int GetWindowWidth();
	
	//------------------------------------------------------------------------------
	//
	//  @brief		デバイスを取得
	//	@return		m_pDevice
	//
	//------------------------------------------------------------------------------
	ID3D11Device*	GetDevice() const;

	//------------------------------------------------------------------------------
	//
	//  @brief		デバイスコンテキストを取得
	//	@return		m_pDeviceContext
	//
	//------------------------------------------------------------------------------
	ID3D11DeviceContext*	GetDeviceContext() const;

	//------------------------------------------------------------------------------
	//
	//  @brief		スワップチェインを取得
	//	@return		m_pSwapChain
	//
	//------------------------------------------------------------------------------
	IDXGISwapChain*	GetSwapChain() const;

	//------------------------------------------------------------------------------
	//
	//  @brief		FeatureLevelを取得
	//	@return		m_featureLevel
	//
	//------------------------------------------------------------------------------
	D3D_FEATURE_LEVEL GetFeatureLevel();
	
	//------------------------------------------------------------------------------
	//
	//  @brief		DriverTypeを取得
	//	@return		m_driverType
	//
	//------------------------------------------------------------------------------
	D3D_DRIVER_TYPE GetDriverType();

	//------------------------------------------------------------------------------
	//
	//  @brief		レンダーターゲットを取得
	//	@return		m_pRenderTargetView
	//
	//------------------------------------------------------------------------------
	ID3D11RenderTargetView*  GetDefaultRenderTargetView() const;

	//------------------------------------------------------------------------------
	//
	//  @brief		深度･ステンシルビュー取得
	//	@return		m_pDepthStencilview
	//
	//------------------------------------------------------------------------------
	ID3D11DepthStencilView* 	GetDefaultDepthStencilView() const;

	//------------------------------------------------------------------------------
	//
	//  @brief		深度･ステンシルバッファを取得
	//	@return		m_pDepthStencilbuffer
	//
	//------------------------------------------------------------------------------
	ID3D11Texture2D*		GetDepthStencilBuffer() const;

	//------------------------------------------------------------------------------
	//
	//  @brief		ウィンドウハンドルを取得
	//	@return		m_windowHandle
	//
	//------------------------------------------------------------------------------
	 HWND	GetWindowHandle();

	 //------------------------------------------------------------------------------
	 //
	 //  @brief		バックバッファの初期化を行う
	 //
	 //------------------------------------------------------------------------------
	 void InitBuckBuffer();

	 //------------------------------------------------------------------------------
	 //
	 //  @brief		リサイズ処理
	 //
	 //------------------------------------------------------------------------------
	 bool BufferResize(const WORD width, const WORD height);
private:
	static DX_System*		m_pInstnace;
	ID3D11Device*			m_pDevice;
	ID3D11DeviceContext*	m_pDeviceContext;
	IDXGISwapChain*			m_pSwapChain;
	ID3D11RenderTargetView* m_pRtv;
	ID3D11DepthStencilView* m_pDsv;
	ID3D11Texture2D*		m_pDsb;
	static D3D_FEATURE_LEVEL		m_featureLevel;
	static D3D_DRIVER_TYPE			m_driverType;
	static HWND						m_windowHandle;

	static unsigned int m_windowWidth;
	static unsigned int m_windowHeight;

	//------------------------------------------------------------------------------
	//
	//  @brief		初期化
	//
	//------------------------------------------------------------------------------
	DX_System();

	//------------------------------------------------------------------------------
	//
	//  @brief		SwapChain,ID3D11Device,ID3D11DeviceContextを作成
	//	@param[in]	hWnd	DX_Framework::GetHwnd()
	//
	//------------------------------------------------------------------------------
	void CreateDeviceAndSwapChain(const HWND& hWnd);

	//------------------------------------------------------------------------------
	//
	//  @brief		レンデーターゲットビューを作成
	//
	//------------------------------------------------------------------------------
	void CreateRenderTargetView();

	//------------------------------------------------------------------------------
	//
	//  @brief		深度･ステンシルバッファを作成する
	//
	//------------------------------------------------------------------------------
	void CreateDepthStencilBuffer();

	//------------------------------------------------------------------------------
	//
	//  @brief		深度･ステンシルビューを作成
	//
	//------------------------------------------------------------------------------
	void CreateDepthStencilView();

};
#endif // !__DX_SYSTEM_H_
